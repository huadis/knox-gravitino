<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<rules>

  <rule dir="IN" name="GRAVITINOUI/gravitino/inbound/root"
        pattern="*://*:*/**/gravitino">
    <rewrite template="{$serviceUrl[GRAVITINOUI]}/"/>
  </rule>

  <rule dir="IN" name="GRAVITINOUI/gravitino/inbound/path"
        pattern="*://*:*/**/gravitino/{path=**}">
    <rewrite template="{$serviceUrl[GRAVITINOUI]}/{path=**}"/>
  </rule>

  <rule dir="IN" name="GRAVITINOUI/gravitino/inbound/args"
        pattern="*://*:*/**/gravitino/?{**}">
    <rewrite template="{$serviceUrl[GRAVITINOUI]}/?{**}"/>
  </rule>

  <rule dir="IN" name="GRAVITINOUI/gravitino/inbound/pathargs"
        pattern="*://*:*/**/gravitino/{path=**}?{**}">
    <rewrite template="{$serviceUrl[GRAVITINOUI]}/{path=**}?{**}"/>
  </rule>

  <rule dir="IN" name="GRAVITINOUI/gravitino/inbound/ui"
        pattern="*://*:*/**/gravitino/ui/{**}">
    <rewrite template="{$serviceUrl[GRAVITINOUI]}/ui/{**}"/>
  </rule>

  <rule dir="IN" name="GRAVITINOUI/gravitino/inbound/configs-no-args"
        pattern="*://*:*/**/gravitino/configs">
    <rewrite template="{$serviceUrl[GRAVITINOUI]}/configs"/>
  </rule>

  <rule dir="IN" name="GRAVITINOUI/gravitino/inbound/configs-with-args"
        pattern="*://*:*/**/gravitino/configs?{**}">
    <rewrite template="{$serviceUrl[GRAVITINOUI]}/configs?{**}"/>
  </rule>

  <rule dir="OUT" name="GRAVITINOUI/gravitino/outbound/static-path-rewrite">
      <match pattern="static/chunks"/>
      <rewrite template="{$frontend[url]}/gravitino/ui/_next/static/chunks"/>
  </rule>

  <rule dir="OUT" name="GRAVITINOUI/gravitino/outbound/ui-path-rewrite">
      <match pattern="/ui"/>
      <rewrite template="{$frontend[url]}/gravitino/ui"/>
  </rule>

  <rule dir="OUT" name="GRAVITINOUI/gravitino/outbound/api" pattern="/api/{path=**}">
      <rewrite template="{$frontend[url]}/gravitino/api/{path=**}"/>
  </rule>

  <rule dir="OUT" name="GRAVITINOUI/gravitino/outbound/static" pattern="/ui/{path=**}">
      <rewrite template="{$frontend[url]}/gravitino/ui/{path=**}"/>
  </rule>

  <rule dir="OUT" name="GRAVITINOUI/gravitino/outbound/js/configs">
    <rewrite template="{$frontend[url]}/gravitino/configs"/>
  </rule>

  <filter name="GRAVITINOUI/gravitino/outbound/root">
    <content type="*/html">
        <apply path="/ui" rule="GRAVITINOUI/gravitino/outbound/ui-path-rewrite"/>
        <apply path="static/chunks" rule="GRAVITINOUI/gravitino/outbound/static-path-rewrite"/>
    </content>
  </filter>

  <filter name="GRAVITINOUI/gravitino/outbound/static-path">
    <content type="*/x-javascript">
      <apply path="/ui" rule="GRAVITINOUI/gravitino/outbound/ui-path-rewrite"/>
      <apply path="/configs" rule="GRAVITINOUI/gravitino/outbound/js/configs"/>
      <apply path="static/chunks" rule="GRAVITINOUI/gravitino/outbound/static-path-rewrite"/>
    </content>
    <content type="*/javascript">
      <apply path="/ui" rule="GRAVITINOUI/gravitino/outbound/ui-path-rewrite"/>
      <apply path="/configs" rule="GRAVITINOUI/gravitino/outbound/js/configs"/>
      <apply path="static/chunks" rule="GRAVITINOUI/gravitino/outbound/static-path-rewrite"/>
    </content>
    <content type="*/css">
      <apply path="/ui" rule="GRAVITINOUI/gravitino/outbound/ui-path-rewrite"/>
    </content>
  </filter>
</rules>
